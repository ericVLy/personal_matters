{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% if tag %}
    {% block title %}
        {% if self.seo_title %}{{ self.seo_title }}{% else %}{{ self.title }}{% endif %}: {{ tag }}
    {% endblock %}

    {% block search_description %}Viewing all ledger posts sorted by the tag {{ tag }}{% endblock %}
{% endif %}

{% block content %}
    {% if not tag %}
        {% include "base/include/header-index.html" %}
    {% endif %}

    <div class="container">
        {% if tag %}
            <div class="row">
                <div class="col-md-12">
                    <h1 class="index-header__title">Ledger Index</h1>
                </div>
                <div class="col-md-12">
                    <p class="index-header__introduction">Viewing all ledger posts sorted by the tag <span class="ledger-tags__tag">{{ tag }}</span>.</p>
                </div>
            </div>
        {% endif %}

        {% if page.get_child_tags %}
            <ul class="ledger-tags">
                <li><span class="ledger-tags__pill ledger-tags__pill--selected">All</span></li>
                {% for tag in page.get_child_tags %}
                    <li><a class="ledger-tags__pill" aria-label="Filter by tag name {{ tag }}" href="{{ tag.url }}">{{ tag }}</a></li>
                {% endfor %}
            </ul>
        {% endif %}

        <div class="ledger-list">
            {% if posts %}
                {% for ledger in posts %}
                    {% include "includes/card/ledger-listing-card.html" %}
                {% endfor %}
            {% else %}
                <div class="col-md-12">
                    <p>Oh, snap. Looks like we were too busy baking to write any ledger posts. Sorry.</p>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock content %}
